SNAPSHOT v0.11.0 — Castra (Agent-centric orchestration) — Brokerless vizier.remote live

Edits since previous snapshot
- Broker deprecation completed: all broker/bus-era code paths and CLI surfaces removed; docs migrated to reflect brokerless architecture.
- Vizier move completed: in-VM Vizier residency with harness-originated vizier.remote.* stream is implemented end-to-end.
- UI cutover completed: UI now directly consumes vizier.remote.*; interim translation shim removed.
- Golden tests added for vizier.remote protocol preamble/framing, reconnect semantics, and latency bounds (lab). SSH responsibilities consolidated into harness.

Active threads (intent + acceptance)
- Thread 21 — Operational clarity (Attention model): unchanged; now fed by vizier.remote.* events; next step is surfacing grouped signals in UI without noise.
- Thread 31 — Agent-first interaction model: unchanged; prioritize first meaningful agent interaction on top of stable vizier.remote stream.
- Thread 40 — Stabilization and polish (new):
  - Evidence: With migration landed, operational edges (shutdown, ephemeral storage hygiene, log discoverability) need hardening.
  - Acceptance: Cooperative shutdown across harness↔VM Vizier; ephemeral VM artifacts cleaned post-run; logs/diagnostics discoverable via a single UI affordance; no regressions in protocol golden tests.

Landed threads
- Thread 12 — Post-boot bootstrap pipeline: LANDED
  - Evidence: in-VM Vizier start is idempotent; health/handshake within 2s; stamps only on success with remediation hints on failure.
- Thread 20 — Harness ↔ In-VM Vizier integration: LANDED
  - Evidence: Per-VM SSH sessions anchor vizier.remote.*; preamble includes protocol + vm_vizier_version; reconnect/backoff signals present; no zombie processes.
- Thread 30 — Busless architecture cutover (Core): LANDED
  - Evidence: CLI no longer exposes bus-era commands; scripts/tests from broker era removed or gated; deprecation docs updated.

Current code state (observable surfaces)
- Core: Broker/bus artifacts removed; bootstrap starts and monitors in-VM Vizier with clear health states.
- Harness: Emits vizier.remote.* over SSH; owns session lifecycle and backoff; vm_commands.sh used internally for remote execution and log retrieval; golden tests cover protocol/latency.
- UI: Direct consumer of vizier.remote.*; roster, vm_fleet, status_footer reflect live Vizier state; translation shim removed; SshManager responsibilities reduced/retired in favor of harness stream.
- Protocol/docs: VIZIER_REMOTE_PROTOCOL.md is the authoritative reference; vizier-move stages marked implemented; broker-deprecation docs finalized with migration guidance.

Narrative themes
- Brokerless, VM-resident orchestration is now the default. Host harness is a thin, reliable, versioned stream origin. UI operates on stable vizier.remote contracts.

Direction of travel
- Harden operations (Thread 40), evolve attention model (Thread 21), and begin agent-first interaction flow (Thread 31) atop the now-stable data plane.

Cross-links
- Protocol: VIZIER_REMOTE_PROTOCOL.md.
- Thread 12: castra-core/src/core/bootstrap.rs; app/up.rs; docs/BOOTSTRAP.md.
- Thread 20: castra-harness/src/{session.rs,runner.rs,stream.rs,events.rs,translator.rs (removed)}; castra-ui direct consumers; vm_commands.sh.
- Thread 30: castra-core/src/core/options.rs; scripts/* (removed/gated); castra-core/src/cli.rs; docs/broker-deprecation/*.
- Thread 40: castra-harness/src/{runner.rs,session.rs}; castra-ui/src/components/status_footer.rs; castra-core/src/core/runtime.rs.

Editorial housekeeping
- Continue to enforce product-level contracts via golden tests; keep implementation choices open unless constrained by protocol or safety.