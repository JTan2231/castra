SNAPSHOT v0.7.2 — Castra (VM orchestration harness)

Edits since last snapshot
- Normalized TODO set: deduplicated and reconstituted five active TODOs with clear thread ties and anchors. No code behavior changes captured; this is a planning hygiene pass.

Active threads (unchanged intent, clarified acceptance)
- Thread 1 — Discovery semantics gap: `--skip-discovery` now framed to require `--config` or fail fast; acceptance clarifies CLI copy, exit behavior, and zero FS walking. Anchors: src/app/common.rs; src/core/options.rs; src/cli.rs.
- Thread 2 — Lifecycle gap: define multi‑phase graceful shutdown before signals with ordered Events and configurable timeouts; acceptance calls for observable logs and OperationOutput sequence. Anchors: src/core/runtime.rs; src/core/events.rs; src/core/options.rs; src/app/down.rs.
- Thread 3 — Broker reachability: status must expose non‑blocking freshness via reachable bool and last_handshake_age_ms; initial bounded probe allowed, help/legend updated. Anchors: src/core/status.rs; src/core/broker.rs; src/app/status.rs.
- Thread 6 — Ports active mode: add `--active` view; keep columns stable; performance target <200ms; graceful degradation note. Anchors: src/core/ports.rs; src/app/ports.rs or src/app/mod.rs; src/core/runtime.rs.
- Thread 10 — Managed images: add checksums/sizes and optional Alpine boot profile; emit verification/profile events; sharpen diagnostics and docs. Anchors: src/managed/mod.rs; src/core/logs.rs/reporter.rs; docs.

Current code state (observable surfaces)
- Versioning embeds semver + short SHA; feature-gated CLI/app behind `cli` (default on). Library builds with --no-default-features succeed.
- Known gaps: skip-discovery lax; no broker freshness; no active ports view; shutdown is signal-only; managed images lack checksums and Alpine boot profile.

Narrative themes
1) UX-first CLI contract → enforce explicit-config with skip-discovery; crisp help and failures.
2) Robust VM lifecycle → cooperative shutdown phases with events and timeouts.
3) Clear connectivity signals → broker handshake freshness, non-blocking status.
6) Networking clarity → ports --active with stable columns and fast path.
10) Trustworthy bootstrap → managed image verification + Alpine boot profile with clear diagnostics.

Direction of travel
- Land skip-discovery contract; ship help/tests.
- Implement graceful shutdown phases and events.
- Add broker freshness and age to status.
- Expose ports --active; wire runtime inspection hook.
- Fill managed image checksums and Alpine boot profile; document cache/profile.

Cross-links
- Each TODO cites this snapshot (v0.7.2) and anchors for implementation context.
